第六章

![image](img/frontdot.jpg)

参考

引用允许程序员为变量创建一个新名字。它们为指针提供了一种更简单、更安全、功能更弱的替代方式。

创建引用

引用的声明方式与常规变量相同，只是在数据类型和变量名之间附加了一个&符号。此外，在声明引用的同时，必须用指定类型的变量对其进行初始化。

```cpp
int x = 5;
int& r = x; // r is an alias to x
int &s = x; // alternative syntax
```

一旦参考被分配或安置，它就不能被重新安置到另一个变量。该引用实际上已成为变量的别名，可以完全像原始变量一样使用。

```cpp
r = 10; // assigns value to r/x
```

参考和指针

引用类似于总是指向同一事物的指针。然而，指针是一个指向另一个变量的变量，而引用只是一个别名，没有自己的地址。

```cpp
int* ptr = &x; // ptr assigned address to x
```

参考和指针指南

一般来说，只要指针不需要重新赋值，就应该使用引用，因为引用比指针更安全，因为它必须总是引用变量。这意味着不需要检查引用是否指向 null，而指针则需要这样做。引用可能是无效的——例如当引用指向空指针时——但是使用引用比使用指针更容易避免这种错误。

```cpp
int* ptr = 0; // null pointer
int& ref = *ptr;
ref = 10;     // segmentation fault (invalid memory access)
```

右值引用

C++11 带来了一种新的引用，叫做右值引用。这个引用可以绑定和修改临时对象(右值)，比如文字值和函数返回值。通过在类型后放置两个&符号来形成右值引用。

```cpp
int&& ref = 1 + 2; // rvalue reference
```

右值引用延长了临时对象的生存期，并允许像普通变量一样使用它。

```cpp
ref += 3;
cout << ref; // "6"
```

右值引用的好处是，在处理临时对象时，可以避免不必要的复制。这提供了更好的性能，特别是在处理更大的类型时，如字符串和对象。