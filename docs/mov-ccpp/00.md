# 零、介绍

像任何人类语言一样，C++ 提供了一种表达概念的方式。如果成功的话，随着问题变得越来越大和越来越复杂，这种表达方式比其他方式要容易和灵活得多。

但是，你不能只把 C++ 看做一个特性的集合；有些功能孤立地看毫无意义。如果你考虑的是设计，而不是简单的编码，那么你只能使用各部分的总和。为了这样理解 C++，你必须理解 C 语言的问题——以及一般的编程问题。这本书讨论了编程问题，为什么它们是问题，以及 C++ 解决这些问题的方法。因此，我在每章中解释的一系列特性是基于我所看到的用这种语言解决特定类型问题的方式。通过这种方式，我希望一次一点地让你从理解 C 语言到 C++ 思维成为你的母语。

自始至终，我将采取这样的态度:你想在你的头脑中建立一个模型，让你能够理解语言，直到裸露的金属；如果你遇到一个谜题，你可以把它输入到你的模型中并推断出答案。我将尝试向您传达使我开始“从 C 到 C++”的见解。

先决条件

我已经决定假设别人已经教过你 C 语言，并且你对它至少有一个阅读水平。我主要关注的是简化我觉得困难的东西:C++ 语言。虽然我已经增加了一章 C 语言的快速介绍，但我仍然假设你已经有了某种编程经验。此外，就像你通过在小说中看到新单词的上下文来直观地了解它们一样，你也可以从本书其余部分中使用 C 的上下文中了解很多关于 C 的信息。

学习 C++

我进入 C++ 的起点和我期望本书的许多读者所处的位置完全一样:作为一名程序员，对编程抱着非常严肃、具体的态度。我后来发现，我甚至不是一个非常好的 C 程序员，隐藏了我对结构、`malloc()`和`free()`、`setjmp()`和`longjmp()`以及其他“复杂”概念的无知，当话题在谈话中出现时，我羞愧地跑开了，而不是去寻求新的知识。

目标

我有几个指导我写这本书的目标。下面的列表描述了它们。

1.  一次呈现一个简单的步骤，这样读者在继续阅读之前可以很容易地消化每个概念。
2.  使用尽可能简单和简短的例子。这经常阻止我处理“真实世界”的问题，但是我发现，当初学者能够理解一个例子的每一个细节时，他们通常会更高兴，而不是被它所解决的问题的范围所打动。
3.  仔细排列特征的展示顺序，这样你就不会看到你没有接触过的东西。当然，这并不总是可能的；在这些情况下，将给出简短的介绍性描述。
4.  给你我认为对你理解这门语言很重要的东西，而不是我所知道的一切。
5.  保持每个部分相对集中。
6.  为读者提供一个坚实的基础，这样他们就可以很好地理解这些问题，进而阅读更难的课程和书籍。
7.  我尽量不使用任何特定供应商的 C++ 版本，因为在学习语言时，我认为特定实现的细节没有语言本身重要。

章

C++ 是一种在现有语法基础上构建新的不同特性的语言。(正因为如此，它被称为混合面向对象编程语言。)这本书的设计初衷只有一个:简化学习 C++ 的过程。以下是本书所包含章节的简要描述。

1.  **对象介绍:**当项目变得太大、太复杂而不容易维护时，“软件危机”就诞生了，程序员说:“我们无法完成项目，即使能，也太贵了！”这引发了本章中讨论的许多反应，以及面向对象编程(OOP)的思想和它如何试图解决软件危机。
2.  **制作和使用对象:**本章解释了使用编译器和库构建程序的过程。它介绍了书中的第一个 C++ 程序，并展示了程序是如何构造和编译的。
3.  **C++ 中的 C:**这一章是对 C++ 中使用的 C 语言特性的详细概述，以及一些只有 c++ 才有的基本特性。它还介绍了在软件开发领域很常见的 make 实用程序。
4.  **数据抽象:**c++ 中的大多数特性都围绕着创建新数据类型的能力。这不仅提供了优秀的代码组织，而且为更强大的 OOP 能力奠定了基础。
5.  **隐藏实现:**你可以决定你的结构中的一些数据和函数对于新类型的用户来说是不可用的，方法是将它们私有。
6.  **初始化和清理:**未初始化的变量是最常见的 C 错误之一。C++ 中的构造器允许你保证新数据类型的变量总是被正确初始化。如果你的对象也需要某种清理，你可以保证这种清理总是发生在 C++ 析构函数上。
7.  **函数重载和默认参数:** C++ 旨在帮助你构建大型复杂的项目。在这样做的时候，你可能会引入多个使用相同函数名的库，你也可以选择在一个库中使用不同含义的相同名称。C++ 通过函数重载简化了这一过程，只要参数列表不同，就可以重用相同的函数名。默认参数通过自动为某些参数提供默认值，允许您以不同的方式调用同一个函数。
8.  **常量:**本章涵盖了`const`和`volatile`关键字，它们在 C++ 中有额外的含义，尤其是在类内部。
9.  **内联函数:**预处理器宏消除了函数调用开销，但是预处理器也消除了有价值的 C++ 类型检查。内联函数为您提供了预处理器宏的所有优点，以及真实函数调用的所有优点。
10.  名称控制:创建名称是编程中的一项基本活动，当一个项目变大时，名称的数量可能会多得令人难以招架。C++ 允许您在名称的创建、可见性、存储位置和链接方面进行大量控制。本章展示了在 C++ 中如何使用两种技术来控制名字，静态关键字和名字空间特性。
11.  **引用和复制构造器:** C++ 指针的工作方式类似于 C 指针，还有更强的 C++ 类型检查功能。您还将遇到复制构造器，它控制对象通过值传入和传出函数的方式。
12.  在这一章中，你将学到操作符重载只是一种不同类型的函数调用，你将学习如何编写自己的函数调用，处理有时令人困惑的参数、返回类型的使用，以及决定是否让操作符成为成员或朋友。
13.  **动态对象创建:**一个空中交通管制系统需要管理多少架飞机？一个 CAD 系统需要多少个形状？在一般的编程问题中，你无法知道你正在运行的程序所需要的对象的数量、生存期、或者类型；在这里，您将了解 C++ 的 new 和 delete 如何通过在堆上安全地创建对象来优雅地解决这个问题。
14.  **继承和组合:**数据抽象允许你从零开始创建新的类型，但是有了组合和继承，你可以从现有的类型创建新的类型。通过组合，您可以使用其他类型作为片段来组装新的类型，而通过继承，您可以创建现有类型的更具体版本。
15.  **多态和虚函数:**通过小而简单的例子，你将看到如何创建一个具有继承性的类型家族，并通过它们的公共基类来操作这个家族中的对象。关键字`virtual`允许你一般地对待这个家族中的所有对象。
16.  **模板简介:**继承和组合允许你重用目标代码，但这并不能解决你所有的重用需求。模板通过为编译器提供一种替换类或函数体中的类型名的方法，允许您重用源代码。
17.  **异常处理:**错误处理一直是编程中的难题。异常处理是 C++ 中的一个主要特性，它允许您在发生严重错误时将对象“抛出”函数，从而解决了这个问题。
18.  **字符串深度:**最常见的编程活动是文本处理。C++ `string`类将程序员从内存管理问题中解放出来，同时提供强大的文本处理能力。
19.  **iostreams:** 最初的 C++ 库之一——提供基本 I/O 功能的库——叫做`iostreams`。它旨在用一个更容易使用、更灵活和可扩展的 I/O 库来取代 C 的`stdio.h`。
20.  **运行时类型识别:**运行时类型识别(RTTI)在你只有一个指向基本类型的指针或引用时，找到一个对象的确切类型。
21.  **多重继承:**这乍听起来很简单:一个新类是从多个现有类继承而来的。然而，您可能会以模糊性和基类对象的多个副本而告终。虚拟基类解决了这个问题。

那么，祝你“从 C 到 C++”一切顺利！

-阿鲁内斯·戈亚尔

2013 年 5 月 14 日，新德里