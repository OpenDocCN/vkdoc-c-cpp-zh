# 第二部分
结构模式

Structural Patterns

顾名思义，结构模式就是建立应用程序的结构，以提高代码的一致性、可用性和可重构性。

当涉及到确定一个物体的结构时，我们可以采用两种相当众所周知的方法:

*   继承:对象自动获取其基类的非私有字段和函数。为了允许实例化，对象必须实现来自其父对象的每个纯虚拟成员；如果没有，那它就是抽象的，不能被创造(但是你可以从中继承)。
*   复合:通常意味着孩子不能离开父母而存在。想象一个拥有`owner<T>`类型成员的对象:当对象被销毁时，它们也随之被销毁。
*   聚合:一个对象可以包含另一个对象，但是那个对象也可以独立存在。想象一个拥有类型为`T*`或`shared_ptr<T>`的成员的对象。

如今，组合和聚合都以相同的方式处理。如果你有一个字段类型为`Address`的`Person`类，你可以选择`Address`是外部类型还是嵌套类型。在这两种情况下，只要它是`public`，就可以将其实例化为`Address`或`Person::Address`。

我认为，当我们真正指的是聚合时，使用组合这个词已经变得如此普遍，以至于我们也可以以可互换的方式使用它们。这里有一些证据:当我们谈到 IoC 容器时，我们说的是复合根。但是等等，IoC 容器不是单独控制每个对象的生存期吗？确实如此，所以我们在这里使用“组合”这个词，实际上是指“聚合”。